import dotenv from 'dotenv';
import { createClient } from '@supabase/supabase-js';

dotenv.config();

const SUPABASE_URL = process.env.SUPABASE_URL;
const SUPABASE_KEY = process.env.SUPABASE_KEY;

console.log(SUPABASE_URL, SUPABASE_KEY);

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

const token = `eyJhbGciOiJIUzI1NiIsImtpZCI6IlZNQUpFQ0dkZG1jS1dTNmsiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3dvb3V3eHJnZGtneG9iYmlrYmRqLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI0NDAyYWE1NS0wZDY2LTRhY2MtYWM0Yi00ODFkYWNmMDYwNDciLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzI4NzEyMTMwLCJpYXQiOjE3Mjg3MDg1MzAsImVtYWlsIjoicWlhbnpoaXdlaTU5MjFAZ21haWwuY29tIiwicGhvbmUiOiIiLCJhcHBfbWV0YWRhdGEiOnsicHJvdmlkZXIiOiJlbWFpbCIsInByb3ZpZGVycyI6WyJlbWFpbCIsImdvb2dsZSJdfSwidXNlcl9tZXRhZGF0YSI6eyJhdmF0YXJfdXJsIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EvQUNnOG9jS092S2pDVjBvR3E0NGstT0s5TG0weHB4bWQ4WmNJVVVYZlhFRTBTdnJxcWc0X0hBPXM5Ni1jIiwiZW1haWwiOiJxaWFuemhpd2VpNTkyMUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZnVsbF9uYW1lIjoi6ZKx5b-X5LyfIiwiaXNzIjoiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tIiwibmFtZSI6IumSseW_l-S8nyIsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwicGljdHVyZSI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS9hL0FDZzhvY0tPdktqQ1Ywb0dxNDRrLU9LOUxtMHhweG1kOFpjSVVVWGZYRUUwU3ZycXFnNF9IQT1zOTYtYyIsInByb3ZpZGVyX2lkIjoiMTE3NDYwMzAwMzgzOTU3NjIzNDQ2Iiwic3ViIjoiMTE3NDYwMzAwMzgzOTU3NjIzNDQ2In0sInJvbGUiOiJhdXRoZW50aWNhdGVkIiwiYWFsIjoiYWFsMSIsImFtciI6W3sibWV0aG9kIjoicGFzc3dvcmQiLCJ0aW1lc3RhbXAiOjE3Mjg3MDg1MzB9XSwic2Vzc2lvbl9pZCI6Ijc2Yjg2MmUxLWUzZGItNGFiMy04NTVjLWRjMDRkOGE1YWY1MCIsImlzX2Fub255bW91cyI6ZmFsc2V9.vqRo46PW8aQoPOLWmKLl-7UrZnTXwfb0XDAtY-NSNe8`

const { data, error } = await supabase.auth.getUser(token);
if (error) {
    console.error('Error setting Supabase session:', error);
} else {
    console.log(data.user)
    console.log('Supabase session set successfully');
}
